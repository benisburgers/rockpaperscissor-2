<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissor</title>
  </head>
  <body>
    <p> Wanna play? Whoever reaches 5 points first wins. Choose your weapon of choice:</p>
    <div id="firstSlide">
      <p>Welcome to rock, paper, scissor. Wanna play?</p>
      <button id="letsPlay">Let's play</button>
    </div>
    <div id="secondSlide" style = "visibility:hidden">
      <div id = "choices">
        <button id="rock" >Rock</button>
        <button id="paper">Paper</button>
        <button id="scissor">Scissor</button>
      </div>
    </div>
    <div id="div1">
      <p id="choice"></p>
      <p id="outcome"></p>
      <p id="computerScore"></p>
      <p id="humanScore"></p>
    </div>
  </body>

  <script>
  
    let humanScore = 0;
    let computerScore = 0;

    function clickLetsPlay() {
      document.getElementById("firstSlide").style.display = "none";
      document.getElementById("secondSlide").style.visibility = "visible";
    }

    let btn = document.querySelector('#letsPlay');
    btn.addEventListener('click', () => {
      clickLetsPlay();
    });

      // buttons is a node list. It looks and acts much like an array.
    const buttons = document.querySelectorAll('#choices button');
    // we use the .forEach method to iterate through each button
    buttons.forEach((button) => {
    // and for each one we add a 'click' listener
    button.addEventListener('click', (e) => {
      playRound(button.id);
    });
    });

    function reset() {
      document.getElementById("outcome").innerHTML = "";
      document.getElementById("choice").innerHTML = "";
      humanScore = 0;
      computerScore = 0;
    }

    function humanWins() {
      humanScore = humanScore + 1;
      document.getElementById("outcome").innerHTML = "You win.";
      if (humanScore == 5) {
        alert("Human won five points. The game is done.");
        reset()
      }
    }

    function computerWins() {
      computerScore = computerScore + 1;
      document.getElementById("outcome").innerHTML = "Computer wins.";
      if (computerScore == 5) {
        alert("Computer won five points. The game is done.");
        reset()
      }
    }

    function tie() {
      document.getElementById("outcome").innerHTML = "It's a tie.";
    }

    function generateComputerChoice() {
      let randomNumber = Math.floor(Math.random() * 3) + 1;
      if (randomNumber == 1) {
        return ("rock");
      }
      else if (randomNumber == 2) {
        return ("paper");
      }
      else {
        return ("scissor");
      }
    }

    function playRound(input) {
      let computerChoice = generateComputerChoice();
      let humanChoice = input;
      document.getElementById("choice").innerHTML = "You chose " + humanChoice + ", and the computer chose " + computerChoice + ".";
      if (humanChoice !== "rock" && humanChoice !== "paper" && humanChoice !== "scissor") {
        return ("invalidEntry");
      }
      else {
        if (computerChoice === "rock") {
          if (humanChoice === "paper") {
            humanWins();
          }
          else if (humanChoice === "scissor") {
            computerWins();
          }
          else {
            tie();
          }
        }
        else if (computerChoice === "paper") {
          if (humanChoice === "rock") {
            computerWins();
          }
          else if (humanChoice === "scissor") {
            humanWins();
          }
          else {
            tie();
          }
        }
        else if (computerChoice === "scissor") {
          if (humanChoice === "rock") {
            humanWins();
          }
          else if (humanChoice === "paper") {
            computerWins();
          }
          else {
            tie();
          }
        }
      }
      document.getElementById("computerScore").innerHTML = "The computer's score is " + computerScore + ".";
      document.getElementById("humanScore").innerHTML = "Your score is " + humanScore + ".";
    }
  </script>
</html>
